# Часто задаваемые вопросы {#faq}

# Что такое архитектура модель/вид? {#faq_modelview}
Архитектура модель/вид (model/view architecture) --- это частный случай архитектуры
модель/вид/контроллер (model/view/controller). Модель --- это часть системы, которая
отвечает за хранение и обработку данных. Вид отвечает за отображение данных.
Контроллер отвечает за управление через пользовательский интерфейс. В Qt функции
вида и контроллера объединены.

См. также [подробное описание](http://doc.qt.io/qt-5/model-view-programming.html)
в документации Qt.

# Что такое интерфейс класса? {#faq_interface}
Интерфейс в узком смысле представляет собой совокупность методов (с определёнными
параметрами и типом возвращаемого значения). В C++ интерфейс оформляется в виде класса,
содержащего виртуальные методы, которые производные классы могут определить (назначить
тело функции) или переопределить (заменить тело функции).

Один класс может реализовать несколько интерфейсов. Например, класс `Car`
(легковой автомобиль) может реализовать интерфейсы `Vehicle` (транспортное средство)
и `Asset` (ценность). Интерфейс `Vehicle` может содержать методы для определения
типа транспортного средства, типа двигателя, грузоподъёмности и т. д. Интерфейс
`Asset` может содержать методы для определения типа ценности (материальная
ценность, интеллектуальная собственность и т. д.), стоимости и т. д.

Чтобы можно было создать объект класса `Car`, все методы, в том числе унаследованные
от интерфейсов, должны быть определены. Класс `Car` обязан определить все методы,
не имеющие определения, а также может переопределить методы, уже имеющие
определения в базовых (родительских) классах.

Польза интерфейсов в том, что алгоритмы могут работать не с конкретными классами,
а с любыми классами, реализующими нужный им интерфейс. Например, у организации
может быть много автомобилей (объектов класса `Car`). Алгоритм управления рассматривает
автомобиль как объект `Car`, так как ему нужны методы рулевого управления
и переключения передач. Алгоритм логистики тот же автомобиль рассматривает как
объект `Vehicle`, так как его интересуют грузоподъёмность, скорость, расход топлива.
С точки зрения бухгалтерского алгоритма, тот же автомобиль является объектом `Asset`,
так как для него важны стоимость и износ.

В результате алгоритмы рассматривают объекты, с которыми работают, через
призму интерфейсов, содержащих важные для них методы. Наличие или отсутствие
каких-либо ещё методов не влияет на работу алгоритма. Благодаря этому, алгоритм
может обрабатывать любой объект, имеющий нужный интерфейс, независимо от специфики
объекта. Нет нужды писать отдельные бухгалтерские алгоритмы для работы с
автомобилями, самолётами или мебелью, достаточно написать один алгоритм,
работающий с объектами, реализующими интерфейс `Asset`.

# Что такое константный метод? {#faq_const_method}
Константным в C++ называется метод класса, который не имеет права изменять объект класса,
для которого метод вызывается. Подразделение методов на константные и неконстантные нужно,
чтобы компилятор мог предотвратить изменение константного объекта.

Константные методы объявляются с квалификатором `const` после списка параметров, например:

    class A {
        int m_x;
    public:
        A(): m_x(0) {} // Конструктор
        int get() const { return m_x; } // Константный метод
        void add(int x) { m_x += x; } // Неконстантный метод
    };

Такие методы можно вызывать даже у объекта, который является константным:

    const A obj;
    int x;
    x = obj.get(); // Нормально: вызов константного метода
    obj.add(5); // Ошибка: вызов неконстантного метода у константного объекта!

# Какова структура модели в Qt? {#faq_qt_model_structure}
Модели, которые Qt использует в [архитектуре model/view](@ref faq_modelview), являются древовидной
структурой таблиц. Потомки каждого узла дерева организованы в виде таблицы. Каждый потомок,
в свою очередь, тоже имеет таблицу потомков.

Корень этой структуры имеет индекс, который создаётся конструктором класса QModelIndex
по умолчанию. Для такого индекса метод `isValid()` возвращает `false`. Корню модели не
сопоставлены никакие данные, он лишь служит точкой отсчёта.

Чаще всего встречающиеся на практике список, таблица, дерево с линейным списком потомков являются
частными случаями общей структуры иерархических таблиц.

В Toynote используется табличная модель, реализуемая классом Notebook. Табличная модель является
одноуровневой — состоит из корня и таблицы его потомков. Каждый потомок отвечает за одну ячейку таблицы
и не может иметь собственных потомков.

См. [иллюстрации структуры моделей](http://doc.qt.io/qt-5/model-view-programming.html#basic-concepts)
в документации Qt.

# Что такое индекс элемента модели в Qt? {#faq_qt_model_index}
Индекс — это объект, позволяющий идентифицировать определённый элемент,
доступный в модели. Индексы являются объектами класса QModelIndex.

Индекс элемента состоит из трёх компонентов: индекса его родителя,
а также номера строки и столбца в таблице потомков родителя. В классе QModelIndex
предусмотрены методы, позволяющие узнать эти данные.

Индексы обычно передаются методам модели, чтобы указать на элемент,
о котором идёт речь.

# Что такое роль данных для элемента модели в Qt? {#faq_qt_model_role}
С одним элементом модели в Qt может быть связано несколько объектов данных,
каждый из которых играет определённую *роль*. Стандартные роли, используемые
Qt, собраны в перечисляемом типе Qt::ItemDataRole.

Из стандартных ролей абсолютно необходимой является Qt::DisplayRole. Данные
с этой ролью — это текст, который отображается привязанным к модели видом
для данного её элемента.

Остальные роли позволяют влиять на отображение или функционирование элемента модели.
Например, Qt::DecorationRole — это цвет или иконка, отображаемые рядом с элементом,
Qt::ToolTipRole — это текст для всплывающей подсказки.

# Что такое Qt Designer? {#faq_qt_designer_whatis}
Qt Designer — это визуальный конструктор [виджетов](@ref faq_widget), входящий
в IDE Qt Creator. Он автоматизирует создание программного кода,
собирающего нужный графический интерфейс из классов библиотеки Qt.

# Как работает Qt Designer? {#faq_qt_designer_how}
Qt Designer позволяет пользователю сформировать вид интерфейса, параметры его
элементов и связи между ними в режиме WYSIWYG. Результат сохраняется в файле
с расширением .ui (UI-файле).

UI-файл написан на языке, который является разновидностью XML. В нём записана
вся информация, необходимая для воссоздания разработанного пользователем
графического интерфейса.

При сборке проекта из UI-файла автоматически генерируется код на языке C++,
содержащий класс (UI-класс), состоящий из виджетов и кода для их настройки.

Далее обычно объект, который будет основой для вывода графического интерфейса
(это может быть объект класса-потомка QDialog или QMainWindow), создаёт объект UI-класса и
вызывает код настройки, передавая ему указатель на себя. Код настройки
создаёт нужный интерфейс на объекте-основе.

См. [подробнее](http://doc.qt.io/qt-5/designer-using-a-ui-file.html) в документации Qt.

# Как добавить новое окно в Qt Designer?
Необходимо добавить в проект в Qt Creator элемент «Qt Designer Form Class»
(File | New File or Project... | Files and Classes | Qt | Qt Designer Form Class).
При этом добавится UI-файл, а также заголовочный файл и файл реализации для
класса, который будет обеспечивать функционирование вашего окна.

# Что такое виджет? {#faq_widget}
Виджет — это объект графического интерфейса. Окна, кнопки, поля для ввода и т. д.
являются виджетами.

В Qt виджеты представляются классами-потомками QWidget. Таких классов много:
QDialog (диалоговое окно), QMainWindow (главное окно), QPushButton (кнопка),
QLineEdit (поле для ввода строки текста) и т. д.

Виджеты можно добавлять в графический интерфейс приложения вручную, создавая
объекты соответствующих классов, либо пользоваться конструктором
[Qt Designer](@ref faq_qt_designer_how), который позволяет создать необходимый
программный код автоматически.

# Что такое ресурсы в приложении Qt? {#faq_resources_whatis}
Ресурсы в приложении Qt — это двоичные файлы, которые приложение использует
в своей работе, упакованные в специальный файл или интегрированные в
исполняемый файл приложения.

Обычно в виде ресурсов хранятся иконки приложений, но система ресурсов Qt
позволяет хранить произвольные двоичные данные.

Ресурсы приложения доступны по виртуальному файловому пути, начинающемуся
с двоеточия. Например, строка «:/icons/open.png» указывает на ресурс
«/icons/open.png». Такие пути можно использовать вместо реальных файловых
путей при создании объектов QIcon или QFile и др. Также ресурсы можно
назначать в качестве иконок в Qt Designer.

См. [подробнее](http://doc.qt.io/qt-5/resources.html) в документации Qt.
